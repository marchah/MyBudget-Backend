<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    <changeSet author="marcha (generated)" id="1429828953031-1">
        <createTable tableName="action">
            <column autoIncrement="true" name="id" type="bigint">
                <constraints nullable="false" primaryKey="true" primaryKeyName="actionPK"/>
            </column>
            <column name="version" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="amount" type="double precision">
                <constraints nullable="false"/>
            </column>
            <column name="date" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="id_recurring" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="type_id" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-2">
        <createTable tableName="recurring">
            <column autoIncrement="true" name="id" type="bigint">
                <constraints nullable="false" primaryKey="true" primaryKeyName="recurringPK"/>
            </column>
            <column name="version" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="action_id" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="create_date" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="end_date" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="next_date" type="datetime">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-3">
        <createTable tableName="type">
            <column autoIncrement="true" name="id" type="bigint">
                <constraints nullable="false" primaryKey="true" primaryKeyName="typePK"/>
            </column>
            <column name="version" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="id_parent" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="is_incoming" type="bit">
                <constraints nullable="false"/>
            </column>
            <column name="rgb" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-4">
        <createTable tableName="user">
            <column autoIncrement="true" name="id" type="bigint">
                <constraints nullable="false" primaryKey="true" primaryKeyName="userPK"/>
            </column>
            <column name="version" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="display_name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="login" type="varchar(15)">
                <constraints nullable="false"/>
            </column>
            <column name="password_hash" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="token" type="varchar(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-8">
        <createIndex indexName="FK_2isde2tuo612dvjhk5cbuk736" tableName="action">
            <column name="type_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-9">
        <createIndex indexName="FK_62moy57i34lm4dpaykiqyl9wo" tableName="recurring">
            <column name="action_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-10">
        <createIndex indexName="FK_q5x10akjbn1fve4w0unofbgn1" tableName="type">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-11">
        <createIndex indexName="UK_cv890lwc9th6go54id7cdhsy5" tableName="type" unique="true">
            <column name="title"/>
        </createIndex>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-12">
        <createIndex indexName="title_uniq_1429828952940" tableName="type" unique="true">
            <column name="title"/>
        </createIndex>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-13">
        <createIndex indexName="UK_ew1hvam8uwaknuaellwhqchhb" tableName="user" unique="true">
            <column name="login"/>
        </createIndex>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-14">
        <createIndex indexName="login_uniq_1429828952952" tableName="user" unique="true">
            <column name="login"/>
        </createIndex>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-5">
        <addForeignKeyConstraint baseColumnNames="type_id" baseTableName="action" constraintName="FK_2isde2tuo612dvjhk5cbuk736" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="type" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-6">
        <addForeignKeyConstraint baseColumnNames="action_id" baseTableName="recurring" constraintName="FK_62moy57i34lm4dpaykiqyl9wo" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="action" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="marcha (generated)" id="1429828953031-7">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="type" constraintName="FK_q5x10akjbn1fve4w0unofbgn1" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="user" referencesUniqueColumn="false"/>
    </changeSet>
</databaseChangeLog>
